"""


"""

from bitstring import BitArray
import bloomfilter2 as bloom


def sync_bloomfilter_from_server(bloom_payload):
  """

  """
  payload_len = len(bloom_payload)
  print '[*] payload_len = ', payload_len
  hex_str = ''
  for byte in bloom_payload:
    print '{:02x}'.format(ord(byte)),
    hex_str = hex_str + '{:02x}'.format(ord(byte))
  print '-------------'


  c = BitArray(hex='0x'.join(hex_str))
  # print c.bin[2:]
  bf = bloom.BloomFilter(payload_len * 8)
  bf.update(c.bin[2:])

  return bf

hex_str = '00000000000000000000000000000000000100000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000008000000000000000040000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000008000000020000002000000000000000000001000000000000000000000000000000000040000004000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000400000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000100000000000000000000000000000000000000080000000000000010000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100002000000000000000000020000000000000000000000000000000000000000'
c = BitArray(hex='0x'.join(hex_str))
print c.bin
bf = bloom.BloomFilter(c.bin, 5000)

bf.add('3946DDA02280FAB12E76101C4A17E2ED83A4FB80')
print bf.lookup('DA39A3EE5E6B4B0D3255BFEF95601890AFD80709')
print bf.lookup('3946DDA02280FAB12E76101C4A17E2ED83A4FB80')
# print bf.lookup('65BF6B68990217F859769C99BF838B4485262EB8')
# print bf.lookup('A379A7EA19D62FEF7D96BB6FA3D8ECD1183D0059')
# print bf.lookup('A872458231B9A80F5990E9DB3EC0A8EAFF8D25C2')


























